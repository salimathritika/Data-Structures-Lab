#include<stdio.h>
#include<stdlib.h>

typedef struct
{
    int coe;
    int exp;
    struct node*next;
}node;

node*create(int c,int e,node*ptr)
{
    node*temp;
    temp=(node*)malloc(sizeof(node));
    temp->coe=c;
    temp->exp=e;
    temp->next=ptr;
    return temp;
}

node* create_poly(int n)
{
    int i,c,e;
    node*rear;
    node* first;
    for(i=0;i<n;i++)
    {
        scanf("%d%d",&c,&e);
        if(first==NULL)
        {
            first=create(c,e,NULL);
            rear=first;
        }
        else
            rear=rear->next=create(c,e,NULL);
    }
    return first;
}

node*add(node *a,node *b)  //NOT WORKING
{
    node *front,*rear,*temp;
    rear=front=create(0,0,NULL);
    while((a!=NULL)&&(b!=NULL))
    {
        if(a->exp==b->exp)
        {
            rear=rear->next=create((a->coe)+(b->coe),a->exp,NULL);
            a=a->next;
            b=b->next;
        }
        else if((a->exp)>(b->exp))
        {
            rear=rear->next=create(a->coe,a->exp,NULL);
            a=a->next;
        }
        else
        {
            rear=rear->next=create(b->coe,b->exp,NULL);
            b=b->next;
        }
    }
    while(b!=NULL)
    {
        rear=rear->next=create(b->coe,b->exp,NULL);
        b=b->next;
    }
    while(a!=NULL)
    {
        rear=rear->next=create(a->coe,a->exp,NULL);
        a=a->next;
    }

    //To delete dummy node
    temp=front;
    front=front->next;
    free(temp);
    return front;
}

void display(node *temp)  //NOT WORKING
{
    if(temp==NULL)
        printf("\nEmpty\n");
    else
    {
        while(temp!=NULL)
        {
            printf("%d^x%d+",temp->coe,temp->exp);
            temp=temp->next;
        }
    }
}

int main()
{
    int n;
    printf("Enter the number of elements of first polynomial:");
    scanf("%d",&n);
    node *poly1=create_poly(n);
    printf("Enter the number of elements of second polynomial:");
    scanf("%d",&n);
    node *poly2=create_poly(n);
    printf("WOrked till here");
    display(poly1);
    display(poly2);
    node *poly3=add(poly1,poly2);
    printf("WOrked till here");

    display(poly3);
}
